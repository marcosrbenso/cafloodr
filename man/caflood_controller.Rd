% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/auxiliary_functions.R
\name{caflood_controller}
\alias{caflood_controller}
\title{Create a Controller File for CAFlood Simulations}
\usage{
caflood_controller(
  Input,
  run_name = "This is a CAFLOOD simulation",
  run_short_name,
  time_start = 0,
  time_end = 86400,
  max_DT = 60,
  min_DT = 0.01,
  alpha_fraction = 0.1,
  max_iterations = 1e+06,
  roughness_global,
  ignore_WD = 1e-04,
  tolerance = 1e-04,
  slope_tolerance = 0.528,
  boundary_ele,
  dem_path,
  dem_name,
  rain_path,
  flow_path,
  output_period = 300,
  Raster_WD_Tolerance = 0.01,
  Upstream_Reduction = 0.5
)
}
\arguments{
\item{Input}{Character. Path to the folder where the controller file will be saved, typically the model input directory.}

\item{run_name}{Character. Optional. Full descriptive name of the simulation. Default is `"This is a CAFLOOD simulation"`.}

\item{run_short_name}{Character. Required short name used to label outputs and log files.}

\item{time_start}{Numeric. Simulation start time in seconds. Default is `0`.}

\item{time_end}{Numeric. Simulation end time in seconds. Default is `86400` (1 day).}

\item{max_DT}{Numeric. Maximum dynamic time step in seconds. Controls adaptive time stepping.}

\item{min_DT}{Numeric. Minimum dynamic time step in seconds. Prevents instability by limiting smallest time step.}

\item{alpha_fraction}{Numeric. Weighting factor for implicit/explicit solution of the continuity equation. Typically between 0 and 1.}

\item{max_iterations}{Integer. Maximum number of iterations for the solver. Default is `1000000`.}

\item{roughness_global}{Numeric. Manning's roughness coefficient (dimensionless), applied globally across the domain.}

\item{ignore_WD}{Numeric. Water depth threshold (in meters) below which cells are considered dry.}

\item{tolerance}{Numeric. Convergence tolerance for the numerical solver.}

\item{slope_tolerance}{Numeric. Minimum slope value used to avoid flat surface numerical instability.}

\item{boundary_ele}{Numeric. Elevation used for boundary conditions.}

\item{dem_path}{Character. Filename of the Digital Elevation Model (DEM) file used for topography input.}

\item{dem_name}{Character. Internal name or reference for the DEM (e.g., `"dem_main"`).}

\item{rain_path}{Character. Filename of the rainfall input file.}

\item{flow_path}{Character. Filename of the inflow (discharge or water level) input file, if applicable.}

\item{output_period}{Numeric. Time step in seconds for writing output files. Default is `300`.}

\item{Raster_WD_Tolerance}{Numeric. Water depth threshold (in meters) used for raster outputs to identify wet cells.}

\item{Upstream_Reduction}{Numeric. Coefficient (between 0 and 1) to reduce flow influence from upstream cells in CAFloodâ€™s routing scheme.}
}
\value{
Writes a controller text file to the specified `Input` folder. The file contains all necessary configuration settings for the CAFlood model to run a simulation.
}
\description{
Generates a text-based controller file required by the CAFlood hydrodynamic model. This file defines simulation parameters, model input/output files, and numerical solver settings.
}
\details{
This function is part of a wrapper workflow for running CAFlood simulations in R. It builds a properly formatted controller file (`.txt`) containing references to DEMs, rainfall inputs, flow boundaries, and numerical solver options. The file is read by the CAFlood executable during simulation.

Ensure all input files (`dem_path`, `rain_path`, `flow_path`) exist in the specified directory and are formatted according to CAFlood requirements.
}
\examples{
\dontrun{
caflood_controller(
  Input = "C:/Projects/Input",
  run_short_name = "flood_run01",
  roughness_global = 0.035,
  boundary_ele = 580,
  dem_path = "dem_sp.tif",
  dem_name = "DEM_SP",
  rain_path = "rain_event_2021.txt",
  flow_path = "inflow_event_2021.txt"
)
}

}
